<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/bulma.min.css" />
    <link rel="stylesheet" href="assets/css/bio.css" />
    <link rel="stylesheet" href="assets/css/typography.css" />
    <title>ATCO List - ≈ò√≠zen√≠ Letov√©ho Provozu Ostrava</title>
  </head>
  <body>
    <div id="navigation" data-page="atco-list.html" data-theme="dark"></div>

    <section class="section">
      <div class="container">
        <div class="content">
          <h1 class="title is-size-1 has-text-weight-bold">ATCO List</h1>
          <p class="subtitle is-size-4 has-text-weight-medium">Seznam ≈ô√≠d√≠c√≠ch letov√©ho provozu (Air Traffic Control Officers) p≈Øsob√≠c√≠ch na leti≈°ti Ostrava.</p>
        </div>
        
        <div id="bio-list">
          <!-- Bio components will be inserted here -->
        </div>
      </div>
    </section>

    <script src="assets/js/navigation.js"></script>
    <script src="data/atco-data.js"></script>
    <script>
      // Bio component class
      class BioComponent {
        constructor(data) {
          this.data = data;
        }

        render() {
          const bioCard = document.createElement('div'); 
          bioCard.className = 'bio-card';

          // Create image element with fallback
          const imageContainer = document.createElement('div');
          
          if (this.data.image) {
            const img = document.createElement('img');
            img.src = this.data.image;
            img.alt = this.data.imageDescription || this.data.bio.name;
            img.className = 'bio-image';
            
            // Create placeholder for fallback
            const placeholder = document.createElement('div');
            placeholder.className = 'bio-placeholder';
            placeholder.innerHTML = 'üë§';
            placeholder.style.display = 'none';
            
            // Handle image load error
            img.onerror = () => {
              img.style.display = 'none';
              placeholder.style.display = 'flex';
            };
            
            imageContainer.appendChild(img);
            imageContainer.appendChild(placeholder);
          } else {
            // Show placeholder if no image provided
            const placeholder = document.createElement('div');
            placeholder.className = 'bio-placeholder';
            placeholder.innerHTML = 'üë§';
            imageContainer.appendChild(placeholder);
          }

          // Create content
          const bioContent = document.createElement('div');
          bioContent.className = 'bio-content';
          
          bioContent.innerHTML = `
            <h3 class="bio-name is-size-4 has-text-weight-semibold">${this.data.bio.name}</h3>
            <div class="bio-dates is-size-6 has-text-weight-medium">${this.formatDates()}</div>
            
            ${this.formatBasicInfo()}
            ${this.formatLicences()}
            ${this.formatInstruktorInfo()}
            ${this.formatAdditionalInfo()}
          `;

          bioCard.appendChild(imageContainer);
          bioCard.appendChild(bioContent);
          
          return bioCard;
        }

        formatDates() {
          let dates = '';
          if (this.data.bio.dob) {
            dates += `*${this.data.bio.dob}`;
          }
          if (this.data.bio.dod) {
            dates += ` +${this.data.bio.dod}`;
          }
          return dates;
        }

        formatBasicInfo() {
          if (!this.data.bio.nastup && !this.data.bio.odchod) return '';
          
          return `
            <div class="bio-section basic-info">
              <h4 class="bio-section-title is-size-6 has-text-weight-semibold">Slu≈æba</h4>
              <div class="bio-section-content">
                ${this.data.bio.nastup ? `<p><span class="has-text-weight-medium">N√°stup:</span> ${this.data.bio.nastup}</p>` : ''}
                ${this.data.bio.odchod ? `<p><span class="has-text-weight-medium">Odchod:</span> ${this.data.bio.odchod}</p>` : ''}
              </div>
            </div>
          `;
        }

        formatLicences() {
          if (!this.data.licence.licences || this.data.licence.licences.length === 0) return '';
          
          let licenceContent = '';
          this.data.licence.licences.forEach(licence => {
            for (const [key, value] of Object.entries(licence)) {
              licenceContent += `<p><span class="has-text-weight-medium">${key}:</span> ${value}</p>`;
            }
          });
          
          return `
            <div class="bio-section licences">
              <h4 class="bio-section-title is-size-6 has-text-weight-semibold">Licence</h4>
              <div class="bio-section-content">
                ${licenceContent}
              </div>
            </div>
          `;
        }

        formatInstruktorInfo() {
          if (!this.data.instruktor || this.data.instruktor.length === 0) return '';
          
          let instruktorContent = '';
          this.data.instruktor.forEach(inst => {
            for (const [key, value] of Object.entries(inst)) {
              instruktorContent += `<p><span class="has-text-weight-medium">${key}:</span> ${value}</p>`;
            }
          });
          
          return `
            <div class="bio-section instruktor">
              <h4 class="bio-section-title is-size-6 has-text-weight-semibold">Kvalifikace & Instrukto≈ôi</h4>
              <div class="bio-section-content">
                ${instruktorContent}
              </div>
            </div>
          `;
        }

        formatAdditionalInfo() {
          if (!this.data.info) return '';
          
          return `
            <div class="bio-section additional-info">
              <h4 class="bio-section-title is-size-6 has-text-weight-semibold">Dodateƒçn√© informace</h4>
              <div class="bio-section-content">
                <p class="has-text-weight-normal">${this.data.info}</p>
              </div>
            </div>
          `;
        }
      }

      // Render bio components when page loads
      function renderBioList() {
        const bioListContainer = document.getElementById('bio-list');
        
        bioData.forEach(data => {
          const bio = new BioComponent(data);
          bioListContainer.appendChild(bio.render());
        });
      }

      // Initialize when page loads
      document.addEventListener('DOMContentLoaded', renderBioList);
    </script>
  </body>
</html>