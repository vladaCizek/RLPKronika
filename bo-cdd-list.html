<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/bulma.min.css" />
    <link rel="stylesheet" href="assets/css/bio.css" />
    <link rel="stylesheet" href="assets/css/typography.css" />
    <title>BO/CDD List - ≈ò√≠zen√≠ Letov√©ho Provozu Ostrava</title>
  </head>
  <body>
    <div id="navigation" data-page="bo-cdd-list.html" data-theme="dark"></div>

    <section class="section">
      <div class="container">
        <div class="content">
          <h1 class="title is-size-1 has-text-weight-bold">BO/CDD List</h1>
          <p class="subtitle is-size-4 has-text-weight-medium">
            Seznam pracovn√≠k≈Ø Base Operations a Company Dispatch Department na
            leti≈°ti Ostrava.
          </p>
        </div>

        <div id="bio-list">
          <!-- Bio components will be inserted here -->
        </div>
      </div>
    </section>

    <script src="assets/js/navigation.js"></script>
    <script src="data/bo-cdd-data.js"></script>
    <script type="module">
      // Bio component class
      class BioComponent {
        constructor(data) {
          this.data = data;
        }

        render() {
          const bioCard = document.createElement("div");
          bioCard.className = "bio-card";

          // Create image element with fallback
          const imageContainer = document.createElement("div");

          if (this.data.image) {
            const img = document.createElement("img");
            img.src = this.data.image;
            img.alt = this.data.name;
            img.className = "bio-image";

            // Create placeholder for fallback
            const placeholder = document.createElement("div");
            placeholder.className = "bio-placeholder";
            placeholder.innerHTML = "üë§";
            placeholder.style.display = "none";

            // Handle image load error
            img.onerror = () => {
              img.style.display = "none";
              placeholder.style.display = "flex";
            };

            imageContainer.appendChild(img);
            imageContainer.appendChild(placeholder);
          } else {
            // Show placeholder if no image provided
            const placeholder = document.createElement("div");
            placeholder.className = "bio-placeholder";
            placeholder.innerHTML = "üë§";
            imageContainer.appendChild(placeholder);
          }

          // Create content
          const bioContent = document.createElement("div");
          bioContent.className = "bio-content";

          bioContent.innerHTML = `
            <h3 class="bio-name is-size-4 has-text-weight-semibold">${
              this.data.name
            }</h3>
            <div class="bio-dates is-size-6 has-text-weight-medium">${this.formatDates()}</div>
            <div class="bio-details is-size-6">
              ${this.formatDetails()}
            </div>
          `;

          bioCard.appendChild(imageContainer);
          bioCard.appendChild(bioContent);

          return bioCard;
        }

        formatDates() {
          let dates = "";
          if (this.data.birthDate) {
            dates += `*${this.data.birthDate}`;
          }
          if (this.data.deathDate) {
            dates += ` +${this.data.deathDate}`;
          }
          return dates;
        }

        formatDetails() {
          let details = "";

          if (this.data.startDate) {
            details += `<p><span class="has-text-weight-semibold">N√°stup:</span> ${this.data.startDate}</p>`;
          }

          if (this.data.licenseBO) {
            details += `<p><span class="has-text-weight-semibold">Licence BO:</span> ${this.data.licenseBO}</p>`;
          }

          if (this.data.additionalInfo && this.data.additionalInfo.length > 0) {
            this.data.additionalInfo.forEach((info) => {
              details += `<p class="has-text-weight-normal">${info}</p>`;
            });
          }

          if (this.data.departure) {
            details += `<p><span class="has-text-weight-semibold">Odchod:</span> ${this.data.departure}</p>`;
          }

          return details;
        }
      }

      // Render bio components when page loads
      function renderBioList() {
        const bioListContainer = document.getElementById("bio-list");

        bioData.forEach((data) => {
          const bio = new BioComponent(data);
          bioListContainer.appendChild(bio.render());
        });
      }

      // Initialize when page loads
      document.addEventListener("DOMContentLoaded", renderBioList);
    </script>
  </body>
</html>
